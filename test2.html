<html>
<script src="scripts/jquery.js"></script>
<style type="text/css">
#blah {
    border: 0px solid black;
    background-color: red;
    position: static;
    width: 200px;
    height: 100px;
    top:0;
    left:0;
    
}
#blah {
    -webkit-transition: all .3s ease-in-out; 
    -webkit-transform-origin: 0% 0%; 
}
/*
#blah:hover {
    -webkit-transform: scale(5,5); 
}
*/

</style>
<body>

<h3>zooming test</h3>
<img id="blah" src="content/barn.thumb.jpg"/> 
<h3>some text after the zooming</h3>
<script>

var zoomed = false;
var div = document.getElementById("blah");

div.addEventListener("mousedown", function(e) {
    var pos = $("#blah").offset();
    if(zoomed) {
        div.style.webkitTransform = 'scale(1)';
        zoomed = false;
        div.src="content/barn.thumb.jpg";
    } else {
        div.style.position = "absolute";
        div.style.top = pos.top;
        div.style.left = pos.left;
        //console.log("top = " + pos.top);
        var sx = window.innerWidth/div.offsetWidth;
        var sy = window.innerHeight/div.offsetHeight;
        var s = Math.min(sx,sy);
        div.style.webkitTransform =
            'translate('+(-pos.left)+'px,'+(-pos.top)+'px)'
            +' scale('+s+')';
        zoomed = true;
        div.src="content/barn.jpg";
    }
},false);
div.addEventListener( 'webkitTransitionEnd', function( event ) {
        if(!zoomed) {
            div.style.position = "static";
        }
}, false );


</script>
</body>
</html>
